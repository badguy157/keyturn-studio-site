<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Keyturn Studio — Hospitality Website Makeovers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="We rebuild 8–40 room inn & small-hotel websites to increase direct bookings and reduce OTA commissions.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/svg+xml" href="/public/logo-mark.svg?v=2">
  <link rel="icon" sizes="32x32" href="/public/favicon-32.png?v=2">
  <link rel="apple-touch-icon" sizes="180x180" href="/public/apple-touch-icon.png?v=2">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<a class="skip-link" href="#main">Skip to content</a>

<!-- ===== New sticky header (mobile-first) ===== -->
<header class="site-header">
  <div class="container header-bar">
    <a class="brand" href="/" aria-label="Keyturn Studio home">
      <img src="/public/logo.svg?v=2" alt="Keyturn Studio" width="180" height="56" decoding="async">
    </a>

    <!-- Desktop nav -->
    <nav class="nav-desktop" aria-label="Primary">
      <ul class="nav-list">
        <li><a href="#services">How it works</a></li>
        <li><a href="#results">Proof</a></li>
        <li><a href="#pricing">Pricing</a></li>
      </ul>
      <div class="nav-ctas">
        <a class="btn btn-ghost" href="/audit.html">Get a 10-min audit</a>
        <a class="btn btn-primary" href="/onboarding.html" aria-label="Skip audit and start onboarding">Start onboarding</a>
      </div>
    </nav>

    <!-- Mobile hamburger -->
    <button class="menu-toggle" aria-controls="mobileMenu" aria-expanded="false" data-menu-toggle>
      <span class="sr-only"></span>☰
    </button>
  </div>

  <!-- Mobile drawer -->
  <nav id="mobileMenu" class="mobile-drawer" hidden aria-label="Mobile">
    <a href="#services">How it works</a>
    <a href="#results">Proof</a>
    <a href="#pricing">Pricing</a>
    <a class="btn btn-ghost w-full" href="/audit.html">Get a 10-min audit</a>
    <a class="btn btn-primary w-full" href="/onboarding.html">Start onboarding</a>
  </nav>
</header>

<!-- ===== New compact hero ===== -->
<section class="hero">
  <div class="container">
    <h1 class="hero-title">
      More <span class="accent">direct bookings</span>, fewer OTA fees.
    </h1>
    <p class="hero-lede">We rebuild <strong>8–40 room inns &amp; small hotels</strong> so more guests book direct.</p>

    <div class="chip-row" aria-label="Capabilities">
      <span class="chip" title="Google Analytics 4">GA4 events</span>
      <span class="chip" title="Structured data for search engines">JSON-LD</span>
      <span class="chip" title="Core Web Vitals">CWV</span>
      <span class="chip" title="Accessible to screen readers &amp; keyboard users">Accessibility pass</span>
    </div>

    <div class="hero-ctas">
      <a class="btn btn-primary" href="#services">How it works</a>
      <a class="btn btn-ghost" href="#results">See proof</a>
    </div>

    <p class="hero-subtext">
      Ready now? <a href="/onboarding.html">Start onboarding</a> (3-week build, fixed fee).
    </p>
  </div>
</section>

<main id="main">
  <section id="services" class="container grid section">
    <article class="card">
      <h3>Makeover Sprint</h3>
      <p>3–4 weeks to rebuild your site on modern tech with clear CTAs, GA4 tracking, and speed tuned for mobile.</p>
      <ul>
        <li>Home, Rooms, Food/Bar, Story/FAQ</li>
        <li>Sticky “Best Rate” CTA + unified booking link</li>
        <li>GA4 events + JSON-LD schema</li>
        <li>Digital Asset Pack & handover</li>
      </ul>
    </article>

    <article class="card">
      <h3>Growth Care Plan</h3>
      <p>Keep it fast & improving: hosting, updates, monthly CRO nudge, GBP hygiene, and a simple report.</p>
      <ul>
        <li>Monitoring, backups, edits</li>
        <li>Monthly report with commission-savings line</li>
        <li>Quarterly content block</li>
      </ul>
    </article>

    <article class="card">
      <h3>Why it pays</h3>
      <p>Each booking moved off OTAs saves roughly <strong><abbr title="Average Daily Rate">ADR</abbr> × <abbr title="Average Length of Stay">ALOS</strong> × 18%</abbr>.</p>
      <p class="small">Example: ADR $100, ALOS 2 → ~$36 saved per booking.</p>

      <div class="roi-box">
        <strong>ROI at a glance</strong>
        <p>Move just <strong>10–20 bookings/month</strong> to direct and save about <strong>$4.3k–$8.6k/yr</strong> — often enough to repay a Core project inside 12 months.</p>

        <details class="tiny">
          <summary>Show the math</summary>
          <div>
            <p>Saved/booking = ADR × ALOS × commission. Using example values: 100 × 2 × 0.18 = <strong>$36</strong>.</p>
            <p>Annual savings ≈ moved_bookings_per_month × $36 × 12.</p>
          </div>
        </details>
      </div>
    </article>
  </section>

  <!-- Pilot banner -->
  <section class="container banner">
    <p><strong>Founders’ Pilot (2 slots/month):</strong> Reduced setup for properties that let us <strong>publish a case study with metrics</strong> (GA4 + bookings). <strong>Includes first 2 months of Care free, then $300/mo.</strong> Same deliverables, same 3-week timeline.</p>
    <div class="buttons">
      <a class="btn primary js-pilot" href="#audit" aria-label="Apply for Founders’ Pilot">Apply for Pilot</a>
    </div>
  </section>  

  <section class="container specialists section" aria-labelledby="specialists-title">
    <h2 id="specialists-title">Our Specialist Network</h2>
    <p class="small">We’re a lean studio with a vetted bench. When a project needs extra hands, we bring in <strong>Top Rated</strong> designers and builders who follow our Keyturn playbook. You meet them; we manage the work.</p>
    <ul class="specialist-list">
      <li><div class="spec-name">Jane D.</div><div class="spec-meta">UI/UX for hospitality — Top Rated Plus, 500+ ★ reviews</div></li>
      <li><div class="spec-name">Leo P.</div><div class="spec-meta">Next.js/Tailwind implementer — Top Rated, 300+ ★ reviews</div></li>
      <li><div class="spec-name">Ava K.</div><div class="spec-meta">Technical SEO & schema — Top Rated, 200+ ★ reviews</div></li>
    </ul>
    <p class="tiny">Partner badges and prior experience shown with permission. Listed individuals are independent collaborators, not employees.</p>
  </section>

  <section id="results" class="container section">
    <h2>Results</h2>

    <div class="result">
      <div class="result-copy">
        <h4>The Anchor Hotel — Haydon Bridge</h4>
        <ul>
          <li>Direct share lifted from ~3–4% to 22–25%+</li>
          <li>Outbound booking CTR up with sticky CTA</li>
          <li>Faster, cleaner UX + GA4 event tracking</li>
        </ul>

        <div class="buttons">
          <a class="btn" href="/anchor-case.html">Read case study</a>
          <a class="btn" href="https://www.theanchorhotelhaydonbridge.com" target="_blank" rel="noopener noreferrer">View live site</a>
          <a class="btn" href="/screenshot.png" target="_blank" rel="noopener noreferrer">Open screenshot</a>
        </div>

        <p class="disclaimer"><em>Independent studio. “The Anchor Hotel” case study shown with permission.
          <strong>No affiliation or ownership.</strong></em></p>
      </div>

      <figure class="result-visual">
        <img class="zoomable" src="/screenshot.png" alt="The Anchor Hotel homepage after the makeover" loading="lazy" decoding="async">
        <figcaption>Homepage after the makeover</figcaption>
      </figure>
    </div>

    <div class="proof-grid">
      <article class="proof-card"><h5>Direct share ↑</h5><p>From single digits to <strong>22–25%+</strong> (seasonal).</p></article>
      <article class="proof-card"><h5>PageSpeed / <abbr title="Core Web Vitals">CWV</abbr></h5><p>Homepage into the <strong>green</strong>; faster, cleaner UX.</p></article>
      <article class="proof-card"><h5>Tracked funnel</h5><p><code>book_click</code> &amp; <code>booking_outbound</code> GA4 events live.</p></article>
    </div>

    <div class="metrics-grid">
      <article class="metric-card">
        <h5>Website-direct (annual, weighted)</h5>
        <p><strong>21.7%</strong> website-direct</p>
        <p class="tiny">Off-peak snapshot: 18.8% (3/16). Annual weighting uses off-peak ≈9.8% of yearly bookings. In-season assumption: 22% website-direct.</p>
      </article>
      <article class="metric-card">
        <h5>Post-launch snapshot</h5>
        <p><strong>18.8%</strong> website-direct (3 of 16)</p>
        <p class="tiny">Oct 28 → Nov 9 • off-peak</p>
      </article>
      <article class="metric-card">
        <h5><abbr title="Average Daily Rate">ADR</abbr> &amp; <abbr title="Average Length of Stay">ALOS</abbr></h5>
        <p><strong>$90.65 ADR</strong> • <strong>1.51 nights</strong></p>
        <p class="tiny">Occupancy ~26.3% (8 rooms)</p>
      </article>
      <article class="metric-card">
        <h5>Saved per moved booking</h5>
        <p><strong>~$24.60</strong> per booking</p>
        <p class="tiny">ADR × ALOS × 18% commission</p>
      </article>
      <article class="metric-card">
        <h5>Search lift after launch</h5>
        <p>Clicks <strong>+107%</strong>; CTR <strong>5.1% vs 2.3%</strong></p>
        <p class="tiny">Avg pos. <strong>15.7 vs 23.7</strong> (GSC)</p>
      </article>
    </div>
  </section>

  <section id="pricing" class="container section">
    <h2>Pricing</h2>
    <p class="small">Built for owner-operated inns &amp; small hotels (<strong>8–40 rooms</strong>)</p>

    <div class="pay-toggle" role="group" aria-label="Payment options">
      <label class="switch">
        <input type="checkbox" id="payToggle" role="switch" aria-checked="false" aria-label="Pay monthly (0% 4-pay)">
        <span class="slider" aria-hidden="true"></span>
        <span id="switchLabel" class="switch-label">Pay monthly (0% 4-pay)</span>
      </label>
    </div>

    <div class="grid">
      <article class="card">
        <h3 class="card-title">Makeover Sprint (Core)</h3>
        <div class="price" data-upfront="$7,500" data-monthly="$1,875/mo × 4">$7,500</div>
        <p class="who small">Best for: 12–25 rooms, single-property owners.</p>
        <ul class="features">
          <li>Core pages: Home, Rooms, Eat &amp; Drink, What’s On, Story/FAQ</li>
          <li>Unified “Book direct — best rate” CTAs (sticky + hero)</li>
          <li>GA4 events (booking_outbound/book_click) + quick dashboard</li>
          <li>JSON-LD: Hotel/Restaurant/FAQ • Speed &amp; accessibility pass</li>
          <li>eviivo branding/config touch-ups • 2 revision rounds</li>
        </ul>
        <a class="btn primary" href="#audit">Get a 10-min audit</a>
      </article>
      
      <article class="card">
        <h3 class="card-title">Makeover + CRO (Pro)</h3>
        <div class="price" data-upfront="$12,000" data-monthly="$3,000/mo × 4">$12,000</div>
        <p class="who small">Best for: 20–40 rooms or high-demand boutique stays.</p>
        <ul class="features">
          <li>Everything in Core</li>
          <li>Copy polish + structured FAQs + review badges</li>
          <li>Events strip &amp; menu presentation upgrades</li>
          <li>A/B-ready CTA variants &amp; experiment hooks</li>
          <li>Seasonal landing blocks (e.g., cyclists, walkers, weddings)</li>
        </ul>
        <a class="btn" href="#audit">Book discovery</a>
      </article>
      
      <article class="card">
        <h3 class="card-title">Ongoing Plans</h3>
        <div class="price">$300–$900/mo</div>
        <p class="who small">Best for: properties investing in steady CRO/SEO momentum.</p>
        <ul class="features">
          <li><strong>Care ($300/mo):</strong> updates, backups, small edits, GA4 sanity checks</li>
          <li><strong>Growth ($900/mo):</strong> 1 meaningful CRO/SEO win + GBP posts + KPI line</li>
          <li>Monthly change log &amp; direct-booking click tracking</li>
        </ul>
        <p class="tiny perk">Pilot perk: <strong>first 2 months of Care free</strong>, then $300/mo.</p>
        <a class="btn js-pilot" href="#audit">See plan details</a>
        <p class="tiny">Alt: $4,500 + $499/mo × 12</p>
      </article>      
    </div>

    <div class="card footnote">
      <p><strong>Who each tier fits</strong></p>
      <ul>
        <p class="tiny">Founders’ Pilot: case-study partners who meet criteria (data access, showcase permission, and basic volume fit). Includes first 2 months of Care free, then $300/mo.</p>
        <li><strong>Core ($7.5k):</strong> 8–20 rooms; typically repays in ~12–18 months from saved commission alone.</li>
        <li><strong>Pro ($12k):</strong> 20–40 rooms or smaller properties with strong year-round demand/F&amp;B.</li>
        <li><strong>Growth (from $900/mo):</strong> select high-volume properties; target +20–30 direct bookings/month and track it.</li>
      </ul>
      <p class="tiny">0% 4-pay spreads your setup across 4 equal monthly payments; work begins after first payment. Care/Growth are separate.</p>

      <details class="tiny" style="margin-top:8px">
        <summary>Payback estimator (try it)</summary>
        <div class="est" aria-labelledby="estLbl">
          <label id="estLbl" class="sr-only">Payback estimator inputs</label>
          <label for="estADR">ADR ($)
            <input id="estADR" type="number" min="30" step="1" value="100" autocomplete="off" inputmode="decimal">
          </label>
          <label for="estALOS">ALOS (nights)
            <input id="estALOS" type="number" min="1" step="0.1" value="2" autocomplete="off" inputmode="decimal">
          </label>
          <label for="estMoved">Bookings moved / month
            <input id="estMoved" type="number" min="1" step="1" value="15" autocomplete="off" inputmode="numeric">
          </label>
          <label for="estComm">Commission (%)
            <input id="estComm" type="number" min="0" max="100" step="1" value="18" autocomplete="off" inputmode="numeric">
          </label>
          <label for="estCost">Project cost ($)
            <input id="estCost" type="number" min="1000" step="100" value="7500" autocomplete="off" inputmode="numeric">
          </label>
          <button class="btn secondary" type="button" id="estBtn" aria-label="Calculate payback estimate">Calculate</button>
          <p id="estOut" class="small" role="status" aria-live="polite"></p>
        </div>
      </details>

      <div class="buttons" style="margin-top:10px">
        <a class="btn" href="/onboarding.html">Start onboarding</a>
      </div>
    </div>
  </section>

  <section id="principles" class="container section">
    <h2>How we work</h2>
    <ul class="bullets">
      <li><strong>Independent studio.</strong> No affiliation with the properties shown unless stated.</li>
      <li><strong>Hospitality-first.</strong> Owner-operated inns, small hotels, and boutique stays.</li>
      <li><strong>You own everything.</strong> Domain, content, images, and code are handed over in a Digital Asset Pack.</li>
      <li><strong>Transparent fees.</strong> Fixed-fee makeover sprint + simple monthly care plan.</li>
      <li><strong>Privacy-minded.</strong> GA4 only; no guest data resale pixels.</li>
      <li><strong>Truth in imagery.</strong> Lifestyle shots may be staged or AI-assisted — we label them.</li>
    </ul>
  </section>
  
  <section id="portfolio" class="container section">
    <h2>Portfolio components</h2>
    <p class="small">A few example blocks from recent work.</p>
    <div class="gallery">
      <figure><img class="zoomable" src="/public/portfolio/Hero_Desktop.png" alt="Hero (desktop)" loading="lazy" decoding="async"><figcaption>Hero (desktop)</figcaption></figure>
      <figure><img class="zoomable" src="/public/portfolio/Hero_Mobile.png" alt="Hero (mobile)" loading="lazy" decoding="async"><figcaption>Hero (mobile)</figcaption></figure>
      <figure><img class="zoomable" src="/public/portfolio/Rooms_Grid.png" alt="Rooms grid" loading="lazy" decoding="async"><figcaption>Rooms grid</figcaption></figure>
      <figure><img class="zoomable" src="/public/portfolio/RoomCard_Full.png" alt="Room detail" loading="lazy" decoding="async"><figcaption>Room detail</figcaption></figure>
      <figure><img class="zoomable" src="/public/portfolio/Menu_Page.png" alt="Menu section" loading="lazy" decoding="async"><figcaption>Menu section</figcaption></figure>
      <figure><img class="zoomable" src="/public/portfolio/Trust_Line.png" alt="Direct benefits / trust line" loading="lazy" decoding="async"><figcaption>Trust line</figcaption></figure>
      <figure><img class="zoomable" src="/public/portfolio/Sticky_CTA_Mobile.png" alt="Sticky booking bar (mobile)" loading="lazy" decoding="async"><figcaption>Sticky CTA (mobile)</figcaption></figure>
      <figure><img class="zoomable" src="/public/portfolio/Events_Strip.png" alt="What’s On events strip" loading="lazy" decoding="async"><figcaption>Events strip</figcaption></figure>
      <figure><img class="zoomable" src="/public/portfolio/Booking_CTA_Click.png" alt="Booking CTA" loading="lazy" decoding="async"><figcaption>Booking CTA</figcaption></figure>
    </div>
  </section>
  
  <section id="audit" class="container contact section">
    <h2>Get a quick audit</h2>
    <p class="small">Share a few details and we’ll send a 2–3 minute Loom with 3 suggested fixes and an ROI estimate.</p>

    <form id="auditForm"
          class="audit-form"
          action="https://formspree.io/f/mvgdpyay"
          method="POST" novalidate>
      <div class="form-row">
        <label for="property">Property name</label>
        <input id="property" type="text" name="property" required autocomplete="organization">
      </div>

      <div class="form-row">
        <label for="website">Website URL</label>
        <input id="website" type="url" name="website" placeholder="https://example.com" required autocomplete="url">
      </div>

      <div class="form-row two">
        <div>
          <label for="rooms">Rooms</label>
          <input id="rooms" type="number" name="rooms" min="1" max="100" required inputmode="numeric" autocomplete="off">
        </div>
        <div>
          <label for="adr">
            <abbr title="Average Daily Rate — typical nightly room price before taxes/fees">ADR</abbr> (approx.)
          </label>
          <input id="adr" type="number" name="adr" min="40" step="1" inputmode="decimal"
                 placeholder="e.g., 100" aria-describedby="adrHelp" required autocomplete="off">
          <p id="adrHelp" class="tiny">Use your average nightly room price before taxes/fees.</p>
        </div>
      </div>

      <div class="form-row">
        <label for="booking">Booking engine link</label>
        <input id="booking" type="url" name="booking" placeholder="Direct booking URL" autocomplete="url">
      </div>

      <div class="form-row">
        <label for="email">Your email</label>
        <input id="email" type="email" name="email" required autocomplete="email">
      </div>

      <!-- Pilot opt-in -->
      <div class="form-row">
        <label class="check">
          <input type="checkbox"
                 id="pilot"
                 name="pilot"
                 value="yes"
                 aria-controls="pilotFields"
                 aria-expanded="false">
          Apply for Founders’ Pilot (case-study partner pricing)
        </label>
        <p class="tiny" id="pilotHelp">If selected, share a public rooms link and confirm the conditions below.</p>
      </div>

      <!-- Pilot-only fields -->
      <fieldset id="pilotFields" class="pilot-fields" hidden aria-describedby="pilotHelp">
        <legend class="tiny">Pilot verification (required for Pilot)</legend>

        <div class="form-row">
          <label for="rooms_url">Public rooms link (booking engine or OTA)</label>
          <input id="rooms_url" name="rooms_url" type="url" placeholder="https://booking.example.com/property" autocomplete="url">
        </div>

        <div class="form-row">
          <label for="ota_url">Optional: OTA listing link</label>
          <input id="ota_url" name="ota_url" type="url" placeholder="https://www.booking.com/hotel/..." autocomplete="url">
        </div>

        <div class="form-row">
          <label for="ga4_email">GA4/analytics access email</label>
          <input id="ga4_email" name="ga4_email" type="email" placeholder="analytics@yourhotel.com" autocomplete="email">
        </div>

        <div class="form-row">
          <label class="check">
            <input type="checkbox" id="att_showcase" name="att_showcase" value="yes">
            I allow Keyturn to publish a case study incl. anonymised metrics for 18 months.
          </label>
          <label class="check">
            <input type="checkbox" id="att_metrics" name="att_metrics" value="yes">
            I agree to share GA4 + booking/OTA metrics for setup and reporting.
          </label>
        </div>

        <div class="form-row two">
          <div>
            <label for="vol_sessions">Monthly site sessions (≈)</label>
            <input id="vol_sessions" name="vol_sessions" type="number" min="0" step="1" placeholder="e.g., 1500">
            <p class="tiny">Benchmark: <strong>≥ 1,500</strong></p>
          </div>
          <div>
            <label for="vol_ota">OTA bookings / month (≈)</label>
            <input id="vol_ota" name="vol_ota" type="number" min="0" step="1" placeholder="e.g., 10">
            <p class="tiny">Benchmark: <strong>≥ 10</strong></p>
          </div>
        </div>

        <div class="form-row">
          <label for="vol_adr">ADR ($)</label>
          <input id="vol_adr" name="vol_adr" type="number" min="0" step="1" placeholder="e.g., 80">
          <p class="tiny">Benchmark: <strong>≥ $80</strong></p>
        </div>
      </fieldset>

      <!-- Tag the submission type -->
      <input type="hidden" name="program" id="program" value="Standard">
      <input type="hidden" name="pilot_benchmarks" id="pilot_benchmarks" value="">

      <div class="form-row">
        <label for="notes">Notes (optional)</label>
        <textarea id="notes" name="notes" rows="4" placeholder="Anything we should know?" autocomplete="off"></textarea>
      </div>

      <!-- helper fields for Formspree -->
      <input type="hidden" name="_subject" id="fsSubject" value="">
      <input type="hidden" name="_replyto"  id="fsReply"   value="">
      <input type="text"   name="_gotcha"   style="display:none">

      <button class="btn primary" type="submit" id="auditSubmit">Request audit</button>
      <p class="tiny">Prefer email? <a href="mailto:vinnie@keyturn.studio">vinnie@keyturn.studio</a></p>
      <p id="auditMsg" class="tiny" role="status" aria-live="polite" style="margin-top:6px"></p>
    </form>
  </section>
</main>

<footer class="container footer">
  <p>© <span id="y"></span> Keyturn Studio • Marketing websites for hospitality</p>
  <p class="small">
    <a href="/privacy.html">Privacy</a> ·
    <a href="/terms.html">Terms</a> ·
    <a href="/onboarding.html">Start onboarding</a> ·
    <a href="/tools/roi.html">Estimate ROI</a>
    <span style="padding-left:16px;">
      <a href="https://calendly.com/vinnie-keyturn/intro"
         style="background:#0a1220;color:#e6ebf5;text-decoration:none;border-radius:12px;
                padding:10px 14px;display:inline-block;font-weight:700;">
        Book a 15-min intro
      </a>
    </span>
  </p>
</footer>
<script>document.getElementById('y').textContent = new Date().getFullYear()</script>

<!-- Sticky mobile CTA (kept as audit request) -->
<a href="#audit" class="sticky-cta" aria-label="Request an audit">Request audit</a>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // ===== Mobile menu toggle =====
    const toggle = document.querySelector('[data-menu-toggle]');
    const drawer = document.getElementById('mobileMenu');
    if (toggle && drawer){
      const closeDrawer = () => { drawer.hidden = true; toggle.setAttribute('aria-expanded','false'); document.body.classList.remove('no-scroll'); };
      toggle.addEventListener('click', () => {
        const open = toggle.getAttribute('aria-expanded') === 'true';
        toggle.setAttribute('aria-expanded', String(!open));
        drawer.hidden = open;
        document.body.classList.toggle('no-scroll', !open);
      });
      drawer.querySelectorAll('a').forEach(a => a.addEventListener('click', closeDrawer));
    }

    // Year
    const y = document.getElementById('y');
    if (y) y.textContent = new Date().getFullYear();

    // ===== Pricing toggle (works for cards that have data-upfront / data-monthly) =====
    const payToggle = document.getElementById('payToggle');
    const priceEls  = document.querySelectorAll('#pricing .price');

    function setPrices(monthly){
      priceEls.forEach(el => {
        const upfront = el.getAttribute('data-upfront');
        const monthlyVal = el.getAttribute('data-monthly');
        if (!upfront) return; // skip prices that aren't toggleable
        el.textContent = monthly && monthlyVal ? monthlyVal : upfront;
      });
    }
    if (payToggle){
      setPrices(false);
      payToggle.addEventListener('change', (e) => {
        const checked = e.target.checked;
        e.target.setAttribute('aria-checked', checked ? 'true' : 'false');
        setPrices(checked);
      });
    }

    // ===== Estimator =====
    const estBtn   = document.getElementById('estBtn');
    const estOut   = document.getElementById('estOut');
    const $        = (id) => document.getElementById(id);

    function fmtGBP(n, frac = 0){
      try { return new Intl.NumberFormat('en-GB', { style:'currency', currency:'GBP', maximumFractionDigits: frac, minimumFractionDigits: frac }).format(n); }
      catch { return `$${Number(n).toFixed(frac)}`; }
    }
    function clamp(v, min, max){ v = Number(v); if (Number.isNaN(v)) return min; return Math.min(Math.max(v, min), max); }

    if (estBtn){
      estBtn.addEventListener('click', () => {
        const adr    = parseFloat($('estADR').value);
        const alos   = parseFloat($('estALOS').value);
        const moved  = parseFloat($('estMoved').value);
        const comm   = clamp(parseFloat($('estComm').value), 0, 100) / 100;
        const cost   = parseFloat($('estCost').value);

        const valid = [adr, alos, moved, comm, cost].every(n => Number.isFinite(n) && n >= 0);
        if (!valid || adr <= 0 || alos <= 0 || moved <= 0 || cost <= 0){
          estOut.textContent = 'Please enter positive values for ADR, ALOS, moved bookings, and project cost.';
          estOut.style.color = '#fca5a5';
          return;
        }

        const savedPerBooking = adr * alos * comm;
        const annualSavings   = savedPerBooking * moved * 12;
        const monthlySavings  = annualSavings / 12;
        const breakevenMonths = monthlySavings > 0 ? (cost / monthlySavings) : Infinity;
        const roiYear1        = annualSavings - cost;

        estOut.innerHTML = `
          Saves about <strong>${fmtGBP(annualSavings)}</strong>/yr
          (≈ ${fmtGBP(monthlySavings)}/mo).<br>
          Per moved booking: <strong>${fmtGBP(savedPerBooking, 2)}</strong>.
          Breakeven in <strong>${Number.isFinite(breakevenMonths) ? breakevenMonths.toFixed(1) : '—'}</strong> months.
          ${roiYear1 >= 0 ? `Year-1 net after project: <strong>${fmtGBP(roiYear1)}</strong>.` : `Year-1 shortfall before month-${breakevenMonths.toFixed(1)} breakeven: <strong>${fmtGBP(roiYear1)}</strong>.`}
        `;
        estOut.style.color = 'var(--muted-2)';
      });
    }

    // ===== Pilot toggle (conditional fields + CTA wiring) =====
    const pilot        = document.getElementById('pilot');
    const pilotFields  = document.getElementById('pilotFields');
    const program      = document.getElementById('program');
    const pilotBench   = document.getElementById('pilot_benchmarks');
    const msg          = document.getElementById('auditMsg');

    document.querySelectorAll('a.js-pilot').forEach(a => {
      a.addEventListener('click', () => {
        if (pilot){
          pilot.checked = true;
          pilot.dispatchEvent(new Event('change'));
          const audit = document.getElementById('audit');
          if (audit) audit.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });

    function meetsVolumeBenchmarks(){
      const sessions = parseFloat(document.getElementById('vol_sessions')?.value || '') || 0;
      const ota      = parseFloat(document.getElementById('vol_ota')?.value || '') || 0;
      const adr      = parseFloat(document.getElementById('vol_adr')?.value || '') || 0;
      const ok = (sessions >= 1500) || (ota >= 10) || (adr >= 80);
      let why = [];
      if (sessions >= 1500) why.push('sessions≥1500');
      if (ota >= 10)        why.push('OTA≥10/mo');
      if (adr >= 80)        why.push('ADR≥80');
      return { ok, why: why.join(', ') || 'none' };
    }

    function syncPilotRequired() {
      const isOn = !!(pilot && pilot.checked);
      if (pilotFields){
        pilotFields.hidden = !isOn;
        pilot?.setAttribute('aria-expanded', isOn ? 'true' : 'false');
      }
      const reqIds = ['rooms_url', 'ga4_email', 'att_showcase', 'att_metrics'];
      reqIds.forEach(id => {
        const el = document.getElementById(id);
        if (!el) return;
        if (el.type === 'checkbox') {
          el.required = isOn;
        } else {
          el.toggleAttribute('required', isOn);
        }
      });
      if (program) program.value = isOn ? 'Founders’ Pilot' : 'Standard';
    }

    pilot?.addEventListener('change', syncPilotRequired);

    const qs = new URLSearchParams(location.search);
    if ((qs.get('pilot') === '1' || location.hash.includes('pilot')) && pilot){
      pilot.checked = true;
    }
    syncPilotRequired();

    // ===== Audit form (Formspree) with Pilot screening =====
    const form = document.getElementById('auditForm');
    const btn  = document.getElementById('auditSubmit');

    async function submitFormspree(fd){
      const res = await fetch(form.action, { method: 'POST', body: fd, headers: { 'Accept': 'application/json' } });
      return res.ok;
    }

    if (form){
      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        if (form.checkValidity && !form.checkValidity()){
          form.reportValidity();
          return;
        }

        const pilotOn = !!(pilot && pilot.checked);
        if (pilotOn){
          const roomsURL   = document.getElementById('rooms_url')?.value.trim();
          const showcaseOK = document.getElementById('att_showcase')?.checked;
          const metricsOK  = document.getElementById('att_metrics')?.checked;
          const ga4Email   = document.getElementById('ga4_email')?.value.trim();
          const vol        = meetsVolumeBenchmarks();

          if (!roomsURL || !showcaseOK || !metricsOK || !ga4Email){
            msg.textContent = 'For the Pilot, please add a rooms/OTA link, GA4 access email, and tick both attestations.';
            msg.style.color = '#fca5a5';
            return;
          }
          if (!vol.ok){
            msg.textContent = 'Pilot note: please meet at least one benchmark (sessions ≥ 1,500, OTA ≥ 10/mo, or ADR ≥ $80). If your story is exceptional, we may still approve—add context in Notes.';
            msg.style.color = '#f59e0b';
          }
          if (pilotBench) pilotBench.value = vol.why;
        }

        if (msg){ msg.textContent = ''; }
        if (btn){ btn.disabled = true; btn.textContent = 'Sending…'; }

        const fd = new FormData(form);
        fd.set('_subject', `Audit request: ${fd.get('property') || ''}`);
        fd.set('_replyto', fd.get('email') || '');

        const ok = await submitFormspree(fd);
        if (ok){
          form.reset();
          syncPilotRequired();
          if (msg){ msg.textContent = 'Thanks! We’ll send your Loom audit shortly.'; msg.style.color = '#c8facc'; }
        } else {
          if (msg){ msg.textContent = 'Could not send right now. Please email vinnie@keyturn.studio.'; msg.style.color = '#fca5a5'; }
        }
        if (btn){ btn.disabled = false; btn.textContent = 'Request audit'; }
      }, { capture: true });
    }

    // ===== Lightbox (unchanged) =====
    const lb = document.getElementById('lb');
    if (lb){
      const lbImg = lb.querySelector('.lb-img');
      const lbCap = document.getElementById('lbCap');

      function openLB(src, alt){
        lbImg.src = src;
        lbImg.alt = alt || '';
        lbCap.textContent = alt || '';
        lb.classList.add('is-open');
        lb.setAttribute('aria-hidden','false');
        document.body.classList.add('no-scroll');
      }
      function closeLB(){
        lb.classList.remove('is-open');
        lb.setAttribute('aria-hidden','true');
        document.body.classList.remove('no-scroll');
        lbImg.src = '';
        lbCap.textContent = '';
      }

      document.addEventListener('click', (e)=>{
        const img = e.target.closest('img.zoomable');
        if (img){
          e.preventDefault();
          const src = img.getAttribute('data-zoom') || img.currentSrc || img.src;
          openLB(src, img.alt);
          return;
        }
        if (e.target.closest('.lb-close') || e.target === lb){ closeLB(); }
      });

      document.addEventListener('keydown', (e)=>{
        if (e.key === 'Escape' && lb.classList.contains('is-open')) closeLB();
      });
    }
  });
</script>

<!-- Lightbox -->
<div class="lb" id="lb" aria-hidden="true">
  <button class="lb-close" aria-label="Close (Esc)">×</button>
  <img class="lb-img" alt="">
  <div class="lb-cap small" id="lbCap"></div>
</div>

</body>
</html>
