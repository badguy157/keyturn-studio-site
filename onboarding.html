<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Onboarding & Process | Keyturn Studio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="What to expect: the 3-week makeover sprint, approvals, what we need, and how we measure results.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/svg+xml" href="/public/logo-mark.svg?v=2">
  <link rel="icon" sizes="32x32" href="/public/favicon-32.png?v=2">
  <link rel="apple-touch-icon" sizes="180x180" href="/public/apple-touch-icon.png?v=2">
  <link rel="stylesheet" href="/styles.css">
  <script src="/public/site.js" defer></script>
</head>
<body>

<!-- ===== Compact hero (same style) ===== -->
<section class="hero">
  <div class="container">
    <h1 class="hero-title">Onboarding & process.</h1>
    <p class="hero-lede">Simple, fast, and built around lifting <strong>website-direct</strong> share.</p>
    <div class="hero-ctas">
      <a class="btn btn-primary" href="#step1">Start onboarding now</a>
      <a class="btn btn-ghost" href="/#results">See proof</a>
    </div>
  </div>
</section>

<main id="main">
  <!-- ===== 3-Step Onboarding Hub ===== -->
  <section class="container section" style="padding-top:40px">
    <h2 style="margin-bottom:28px">3-Step Onboarding Hub</h2>

    <!-- Step 1: Native Quick Start (no third-party embed) -->
    <article class="card" id="step1" style="margin-bottom:24px;scroll-margin-top:calc(var(--header-h) + 12px)">
      <h3>Step 1: Share Your Details</h3>
      <p class="small">This 2-minute Quick Start lets us prep your project. You‚Äôll get a confirmation email right after.</p>

      <div style="margin-top:16px">
        <form id="quickstartForm" class="stack" novalidate>
          <!-- Honeypot (anti-spam) -->
          <input type="text" name="company" id="company" autocomplete="off" tabindex="-1" aria-hidden="true" style="position:absolute;left:-9999px">

          <div class="grid two">
            <label>Property name
              <input name="propertyName" required>
            </label>
            <label>Website URL
              <input name="websiteUrl" type="url" placeholder="https://‚Ä¶" required>
            </label>
          </div>

          <div class="grid two">
            <label>Contact name
              <input name="contactName" required>
            </label>
            <label>Email
              <input name="email" type="email" required>
            </label>
          </div>

          <div class="grid two">
            <label>Phone (optional)
              <input name="phone" type="tel" inputmode="tel">
            </label>
            <label>Booking system
              <select name="bookingSystem" required>
                <option value="" selected disabled>Select‚Ä¶</option>
                <option>eviivo</option>
                <option>Little Hotelier</option>
                <option>SiteMinder</option>
                <option>Other</option>
              </select>
            </label>
          </div>

          <div class="grid two">
            <label>Primary goal
              <select name="goal" required>
                <option value="" selected disabled>Select‚Ä¶</option>
                <option>More direct bookings</option>
                <option>Reduce OTA fees</option>
                <option>Refresh the look</option>
                <option>Speed up the site</option>
              </select>
            </label>
            <label>Ideal launch timing
              <select name="launchTiming" required>
                <option value="" selected disabled>Select‚Ä¶</option>
                <option>ASAP</option>
                <option>2‚Äì4 weeks</option>
                <option>1‚Äì2 months</option>
              </select>
            </label>
          </div>

          <label>Shared folder link (optional ‚Äî photos/menus)
            <input name="assetsLink" type="url" placeholder="Dropbox / Drive / OneDrive link">
          </label>

          <label>Anything else? (optional)
            <textarea name="notes" rows="3"></textarea>
          </label>

          <!-- meta captured client-side -->
          <input type="hidden" name="pagePath" value="">
          <input type="hidden" name="utm_source" value="">
          <input type="hidden" name="utm_medium" value="">
          <input type="hidden" name="utm_campaign" value="">
          <input type="hidden" name="timezone" value="">

          <div class="hero-ctas">
            <button class="btn btn-primary" id="qsSubmit" type="submit">Send & continue</button>
            <span id="qsMsg" class="small" aria-live="polite" style="margin-left:12px"></span>
          </div>
        </form>
      </div>
    </article>

    <!-- Step 2: Secure Access -->
    <article class="card" id="step2" style="margin-bottom:24px;scroll-margin-top:calc(var(--header-h) + 12px)">
      <h3>Step 2: Secure Access</h3>
      <p class="small">Once you've submitted Step 1, provide us with secure access to your systems. This helps us set up tracking and prepare your site properly.</p>
      <div class="roi-box" style="margin-top:16px">
        <h4 style="margin-top:0;font-size:1rem">What we need:</h4>
        <ul style="margin:12px 0;padding-left:1.2rem">
          <li><strong>Google Analytics 4 (GA4):</strong> Add <code>analytics@keyturn.studio</code> as a Viewer in your GA4 property</li>
          <li><strong>Domain/DNS Access:</strong> Credentials for your domain registrar or hosting (we'll guide you through this on a call)</li>
          <li><strong>Booking Engine:</strong> Your direct booking link and PMS/engine name</li>
          <li><strong>Google Business Profile:</strong> Add <code>hello@keyturn.studio</code> as Manager</li>
          <li><strong>Brand Assets:</strong> Logo files, photos, menus (PDF), and any brand guidelines</li>
        </ul>

        <!-- Nice inline actions -->
        <div class="hero-ctas" style="margin-top:10px; gap:8px; flex-wrap:wrap">
          <a id="btnAssets" class="btn btn-primary" href="#" target="_blank" rel="noopener" style="display:none">Upload brand assets</a>
          <a class="btn btn-ghost" href="mailto:hello@keyturn.studio?subject=Request secure link for DNS credentials" target="_blank" rel="noopener">Request secure DNS link</a>
        </div>

        <details style="margin-top:12px">
          <summary class="small"><strong>Prefer to grant DNS-only access (no passwords)?</strong></summary>
          <ul class="small" style="margin:8px 0 0 18px">
            <li><b>Cloudflare:</b> Members ‚Üí Invite ‚Üí role <i>DNS Editor</i></li>
            <li><b>GoDaddy:</b> Delegate Access ‚Üí share ‚ÄúDomains‚Äù only</li>
            <li><b>Namecheap:</b> Access Manager ‚Üí share ‚ÄúDomain‚Äù (manage) for the specific domain</li>
          </ul>
        </details>

        <div style="margin-top:16px;padding:12px;background:rgba(90,162,255,.08);border-radius:8px;border:1px solid rgba(90,162,255,.2)">
          <p style="margin:0;font-size:.95rem;color:var(--muted-2)">
            <strong>üîí Security note:</strong> Share credentials via secure channels only. We'll provide you with a one-time secure link for sensitive information. Never share passwords via email.
          </p>
        </div>
      </div>
    </article>

    <!-- Step 3: Calendly -->
    <article class="card" id="step3" style="margin-bottom:24px;scroll-margin-top:calc(var(--header-h) + 12px)">
      <h3>Step 3: Schedule Your Kickoff Call</h3>
      <p class="small">Book a 30-minute kickoff call to review your project scope, timeline, and answer any questions.</p>
      <div style="margin-top:16px">
        <div class="calendly-inline-widget"
          data-url="https://calendly.com/vinnie-keyturn/onboarding-kickoff?hide_gdpr_banner=1&utm_source=onboarding"
          style="min-width:320px;height:700px;"></div>
        <script src="https://assets.calendly.com/assets/external/widget.js" async></script>
        <p class="small" style="margin-top:8px">
          Prefer a new tab? <a href="https://calendly.com/vinnie-keyturn/onboarding-kickoff?utm_source=onboarding" target="_blank" rel="noopener">Open Calendly</a>.
        </p>
      </div>
    </article>
  </section>

  <!-- ===== Process (3 cards) ===== -->
  <section id="process" class="container grid section">
    <article class="card">
      <h3>1) Discovery ‚Üí Audit</h3>
      <ul>
        <li>Quick audit request (<a href="/audit.html">form</a>)</li>
        <li>We send a 2‚Äì3 min Loom with 3 fixes + ROI estimate</li>
        <li>20-minute intro call (optional) to scope fit</li>
      </ul>
    </article>

    <article class="card">
      <h3>2) Makeover Sprint (‚âà3 weeks)</h3>
      <ul>
        <li>Core pages: Home, Rooms, Eat &amp; Drink, What‚Äôs On, Story/FAQ</li>
        <li>Unified ‚ÄúBook direct ‚Äî best rate‚Äù CTAs (sticky + hero)</li>
        <li>GA4 events (<code>book_click</code>, <code>booking_outbound</code>) + JSON-LD</li>
        <li>Speed &amp; accessibility pass; Digital Asset Pack</li>
      </ul>
    </article>

    <article class="card">
      <h3>3) Launch ‚Üí Polish ‚Üí Growth</h3>
      <ul>
        <li>Go-live + 30-day polish window for small tweaks</li>
        <li>Optional Care/Growth plan for CRO nudge &amp; reporting</li>
        <li>Monthly KPI line: website-direct share (weighted), booking CTR, search clicks/CTR</li>
      </ul>
    </article>
  </section>
</main>

<footer class="container footer">
  <p>¬© <span id="y"></span> Keyturn Studio ‚Ä¢ Marketing websites for hospitality</p>
  <p class="small"><a href="/privacy.html">Privacy</a> ¬∑ <a href="/terms.html">Terms</a></p>
</footer>

<!-- Sticky mobile CTA (same pattern as index) -->
<a href="#step1" class="sticky-cta" aria-label="Start onboarding">Start onboarding</a>

<!-- Calendly widget script (already included above for inline, harmless to keep here too) -->
<script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>

<!-- Onboarding page specific JS with GA4 events + native form submit -->
<script>
(function() {
  'use strict';

  // --- helper to safely send GA4
  window.safeEvent = window.safeEvent || function(name, params){
    try { window.gtag && window.gtag('event', name, params); } catch(_){}
  };

  // Smooth scroll for in-page anchors
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      const href = this.getAttribute('href');
      if (!href || href === '#') return;
      const target = document.querySelector(href);
      if (target) { e.preventDefault(); target.scrollIntoView({ behavior: 'smooth', block: 'start' }); }
    });
  });

  // Track Step 1 view when 50% visible
  const step1 = document.getElementById('step1');
  if (step1) {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && !step1.dataset.viewed) {
          step1.dataset.viewed = 'true';
          window.safeEvent('onboarding_form_view', { step: 'step1', page_path: window.location.pathname });
        }
      });
    }, { threshold: 0.5 });
    observer.observe(step1);
  }

  // Prefill hidden meta fields
  (function prefillMeta(){
    const qsForm = document.getElementById('quickstartForm');
    if (!qsForm) return;
    const params = new URLSearchParams(location.search);
    qsForm.querySelector('input[name="pagePath"]').value = location.pathname;
    qsForm.querySelector('input[name="utm_source"]').value = params.get('utm_source') || '';
    qsForm.querySelector('input[name="utm_medium"]').value = params.get('utm_medium') || '';
    qsForm.querySelector('input[name="utm_campaign"]').value = params.get('utm_campaign') || '';
    qsForm.querySelector('input[name="timezone"]').value = Intl.DateTimeFormat().resolvedOptions().timeZone || '';
  })();

  // Native Quick Start submit -> /api/quickstart
  const qsForm = document.getElementById('quickstartForm');
  if (qsForm) {
    const btn = document.getElementById('qsSubmit');
    const msg = document.getElementById('qsMsg');

    // Consider interaction when user focuses any field
    qsForm.addEventListener('focusin', () => {
      if (!qsForm.dataset.interacted) {
        qsForm.dataset.interacted = '1';
        window.safeEvent('onboarding_form_interact', { step: 'step1', page_path: location.pathname });
      }
    });

    qsForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      msg.textContent = '';
      btn.disabled = true;
      btn.textContent = 'Sending‚Ä¶';

      const formData = new FormData(qsForm);
      const payload = Object.fromEntries(formData.entries());

      // honeypot
      if (payload.company) { btn.disabled = false; btn.textContent = 'Send & continue'; return; }

      // add a tiny bit of extra context
      payload.userAgent = navigator.userAgent || '';
      payload.referrer = document.referrer || '';

      try {
        const res = await fetch('/api/quickstart', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        const data = await res.json();
        if (!res.ok || !data.ok) throw new Error(data.error || 'Failed');

        // GA4 submit + move to Step 2
        window.safeEvent('onboarding_form_submit', { step: 'step1', page_path: location.pathname });
        msg.textContent = 'Thanks! Check your email for a confirmation.';
        document.getElementById('step2')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
      } catch (err) {
        console.error(err);
        msg.textContent = 'Could not send. Please email hello@keyturn.studio';
      } finally {
        btn.disabled = false;
        btn.textContent = 'Send & continue';
      }
    });
  }

  // Track Calendly booking completion
  window.addEventListener('message', (event) => {
    if (event.data && event.data.event === 'calendly.event_scheduled') {
      window.safeEvent('onboarding_calendly_booked', {
        step: 'step3',
        page_path: window.location.pathname,
        calendly_uri: event.data.payload?.event?.uri || ''
      });
    }
  });

  // ---- Fill dynamic links from env via /api/links ----
  (async function hydrateLinks(){
    try {
      const r = await fetch('/api/links');
      if (!r.ok) return;
      const { fullIntake, upload } = await r.json();

      // If you ever add a "Full intake" button on-page, target it here.
      const btnAssets = document.getElementById('btnAssets');
      if (upload && btnAssets) { btnAssets.href = upload; btnAssets.style.display = 'inline-flex'; }
    } catch(_) {}
  })();
})();
</script>

</body>
</html>
