<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Onboarding – Keyturn Studio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="styles.css" rel="stylesheet">
</head>
<body>
  <!-- Injected header -->
  <header id="site-header"></header>
  <script src="/public/site.js" defer></script>
  
  <main>
    <!-- Hero section with CTA -->
    <section class="onboarding-hero card-section" style="text-align:center; margin-top:2rem;">
      <h1 class="hero-title">Quick Start Onboarding</h1>
      <p class="hero-desc">Get set up in minutes. Complete our simple 3-step onboarding hub.</p>
      <button id="onboarding-start-btn" class="btn btn-pill btn-primary" style="margin:1.5rem 0;" aria-label="Start onboarding">Start onboarding</button>
    </section>
    
    <!-- Onboarding Hub (3 Steps) -->
    <section class="onboarding-hub">
      <!-- Step 1: Google Form -->
      <div class="card-section card" id="step1" tabindex="-1" aria-label="Intake Form">
        <h2 class="step-title">Step 1 — Intake Form</h2>
        <div id="form-card" class="rounded-corner overflow-hidden" style="margin-bottom:1.5rem;">
          <iframe 
            id="onboarding-iframe"
            src="https://docs.google.com/forms/d/e/YOUR_GOOGLE_FORM_ID/viewform?embedded=true" 
            width="100%" height="900" frameborder="0" marginheight="0" marginwidth="0"
            style="border:none; border-radius:14px; width:100%;"
            title="Intake Form">
            Loading&hellip;
          </iframe>
        </div>
      </div>
      <!-- Step 2: Secure Access panel -->
      <div class="card-section card" id="step2" aria-label="Secure Access" style="margin-top:2.5rem;">
        <h2 class="step-title">Step 2 — Secure Access</h2>
        <ul class="step-bullets" style="margin-bottom:0.75rem;">
          <li>Share a one-time link via 1Password, Bitwarden, or Proton Pass to <a href="mailto:hello@keyturn.studio">hello@keyturn.studio</a>
      and paste that link in the intake form field “Secure credential link”.</li>
          <li>Or add us as a user: GA4 (Viewer+Analyst), Search Console (Full), Domain/DNS (user or secure link), PMS/Eviivo (staff), Google Business Profile (Manager), Socials (Editor/Manager).</li>
        </ul>
        <p class="privacy-note" style="margin-top:0.25rem; color:var(--text-muted);">We never store plain-text passwords. You can revoke access after launch.</p>
      </div>
      <!-- Step 3: Calendly booking -->
      <div class="card-section card" id="step3" aria-label="Book Kickoff" style="margin-top:2.5rem;">
        <h2 class="step-title">Step 3 — Book Kickoff Call</h2>
        <div class="rounded-corner overflow-hidden" style="min-height:730px">
          <div class="calendly-inline-widget" data-url="https://calendly.com/YOUR_HANDLE/intro?hide_gdpr_banner=1&utm_source=onboarding" style="min-width:320px; height:700px;"></div>
        </div>
        <script src="https://assets.calendly.com/assets/external/widget.js" async></script>
      </div>
    </section>
    
    <!-- Existing process/approval/success cards BELOW hub (unchanged, demo only) -->
    <section class="onboarding-context" style="margin-top:4rem;">
      <div class="card card-section">
        <h3 class="context-title">Process Card</h3>
        <p>Describe onboarding process steps here.</p>
      </div>
      <div class="card card-section">
        <h3 class="context-title">Approval Card</h3>
        <p>Status, waiting for client, etc.</p>
      </div>
      <div class="card card-section">
        <h3 class="context-title">Success Card</h3>
        <p>Completion/success messaging.</p>
      </div>
    </section>
  </main>
  
  <script>
    // Scroll to Step 1 on CTA
    document.getElementById('onboarding-start-btn').addEventListener('click', function() {
      var el = document.getElementById('step1');
      if(el) el.scrollIntoView({behavior:'smooth'});
    });

    // Onboarding GA4 events (safe, via site.js)
    document.addEventListener('DOMContentLoaded', function() {
      window.safeEvent && window.safeEvent('onboarding_form_view');

      // Interact: delegate clicks inside form card
      document.getElementById('form-card').addEventListener('click', function() {
        window.safeEvent && window.safeEvent('onboarding_form_interact');
      });

      // Try to detect Google Form submit via iframe src change (formResponse)
      var formIframe = document.getElementById('onboarding-iframe');
      if(formIframe) {
        let lastSrc = formIframe.src;
        formIframe.addEventListener('load', function() {
          // Could be a submit; best-effort for cross-origin
          try {
            // Not always accessible due to cross-origin
            var currentHref = formIframe.contentWindow.location.href;
            if(currentHref && currentHref.includes('formResponse')) {
              window.safeEvent && window.safeEvent('onboarding_form_submit');
            }
          } catch(e) {
            // fallback: check src string for formResponse indication
            var nowSrc = formIframe.src;
            if (nowSrc !== lastSrc && nowSrc.includes('formResponse')) {
              window.safeEvent && window.safeEvent('onboarding_form_submit');
            }
            lastSrc = nowSrc;
          }
        });
      }

      // Calendly widget event: onboarding_calendly_booked
      window.addEventListener('message', function(e) {
        if (typeof e.data === 'object' && e.data?.event === 'calendly.event_scheduled') {
          window.safeEvent && window.safeEvent('onboarding_calendly_booked');
        }
      });
    });
  </script>
</body>
</html>